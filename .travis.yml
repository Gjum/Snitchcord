language: java
jdk:
- oraclejdk7
install:
- "./gradlew clean"
script:
- FORGE_VERSION=1.10.2-12.18.3.2254 ./gradlew reobf
- FORGE_VERSION=1.11.2-13.20.0.2260 ./gradlew reobf
branches:
  only:
  - master
before_cache:
- rm -f $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -rf $HOME/.gradle/caches/*/fileHashes/
- rm -rf $HOME/.gradle/caches/minecraft/deobfedDeps/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
before_deploy:
- git config --global user.email "builds@travis-ci.com"
- git config --global user.name "Travis CI"
- git tag -m "Development Build ${TRAVIS_BUILD_NUMBER}" "dev-build-${TRAVIS_BUILD_NUMBER}"
- git push -q ${GITHUB_REPO} --tags
deploy:
  provider: releases
  api_key:
    secure: byt93ZSOyyE0LV2CIxHmhjCS6QLNyiOKNXZU307W2jrpq4XgRsXpdVPB+3gouAILdVxOFynQaPz/9+aH1V9RPXbUd0rflCL1TurQ2kB1iE5bfpDb8xCmq8bbB6IF2b3QuwFEWzjrKewMXSipUVV9G3coo2yQ8UniYdJIavZjZqSrnBE6YJoVdYMyqZhD6VKQd4vpQElowquDDA1HohQUx5pRp1ej8Ei+wh2QEjc6d639Wjh/UX8ylukEnUTX317cWjcqQqRIAa6RuIDF+/g9iOgFP1uDa9KiLjj9le6p9zMBtArvTbXWlwANwslvMz0EG6a2j5Kgowka1GD1k3uPzRiXKo3whnZJQOBLOMrX61rgSUiQHOgE6dzx7oBokioi8gnqPNdYuD5WYevP3D6a0oKHT1/L6iwXWBDePzofS7QslY93RN0bg+hbAVo2yRWKv4QaeyE8ZLS89VXcqcit4LblaS81A6uBJdA4JY1IgiptZq/29cFmWzg9HAo2YaHC89NS35tCKwIo0XLgbTUnKYMFIa0OSsb+4deKOF8JoXnEAUARnQUDH6/QiD5RifYVEW8fj0VUEFTPb5zLruOxsLn5Hs4iyi6AKE0m2D2swJxlgvuaTnAyo67BgS7mIK3Q+jYI8a6ob9k3UmoRsVXWVnJxHazOIKiwSmSj6FiWOr4=
  skip_cleanup: true
  file: build/libs/*.jar
  file_glob: true
  prerelease: true
  on:
    tags: false
